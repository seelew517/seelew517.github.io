<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Computer Networking:A Top-Down Approach 8th Edition | Seelew's Blog</title><meta name="author" content="Seelew"><meta name="copyright" content="Seelew"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="1 Computer Networks and the Internet1.1 What Is the Internet?1.1.1 A Nuts-and-Bolts Description 互联网是一个计算机网络，将传统计算设备如台式电脑、Linux工作站和所谓的服务器互联起来。如今非传统互联网“物”也在连接到互联网。所有这些设备被称为主机(hosts)或终端系统(end systems)。 终">
<meta property="og:type" content="article">
<meta property="og:title" content="Computer Networking:A Top-Down Approach 8th Edition">
<meta property="og:url" content="https://seelew517.github.io/2023/11/21/Computer%20Networking%EF%BC%9AA%20Top-Down%20Approach%208th%20Edition/index.html">
<meta property="og:site_name" content="Seelew&#39;s Blog">
<meta property="og:description" content="1 Computer Networks and the Internet1.1 What Is the Internet?1.1.1 A Nuts-and-Bolts Description 互联网是一个计算机网络，将传统计算设备如台式电脑、Linux工作站和所谓的服务器互联起来。如今非传统互联网“物”也在连接到互联网。所有这些设备被称为主机(hosts)或终端系统(end systems)。 终">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://seelew517.github.io/default_cover%20(29).png">
<meta property="article:published_time" content="2023-11-21T06:15:09.000Z">
<meta property="article:modified_time" content="2023-11-21T06:15:09.000Z">
<meta property="article:author" content="Seelew">
<meta property="article:tag" content="Notes">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://seelew517.github.io/default_cover%20(29).png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://seelew517.github.io/2023/11/21/Computer%20Networking%EF%BC%9AA%20Top-Down%20Approach%208th%20Edition/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Seelew","link":"链接: ","source":"来源: Seelew's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体中文","cht_to_chs":"你已切换为简体中文","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Computer Networking:A Top-Down Approach 8th Edition',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-21 14:15:09'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/preloadavatar.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/card.css"><link rel="stylesheet" href="/css/doublerowdebug.css"><link rel="stylesheet" href="/css/fengcheanimation.css"><link rel="stylesheet" href="/css/snow.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><!--link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/macy@2.1.0/dist/macy.min.css')--><!--script(src='https://cdn.jsdelivr.net/npm/macy@2.1.0/dist/macy.min.js')--><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://avatars.githubusercontent.com/u/97341554"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>const loadingPercentage = document.getElementById("loading-percentage");
//const now = new Date();
//const currentHour = now.getHours();
//const isDaytime = currentHour >= 6 && currentHour < 18;
//loadingPercentage.style.color = isDaytime ? "#000000" : "#FFFFFF";
loadingPercentage.style.color = "white";
let loadingPercentageTimer = setInterval(function() {
  var progressBar = document.querySelector(".pace-progress");
  if (!progressBar) return
  var currentValue = progressBar.getAttribute("data-progress-text");
  if (currentValue !== loadingPercentage.textContent) {
    loadingPercentage.textContent = currentValue;
    if (currentValue === "100%") {
      clearInterval(loadingPercentageTimer);
    }
  }
}, 100);
const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="/css/progress_bar.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/%E6%A0%87%E7%AD%BE/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/default_cover%20(29).png')"><nav id="nav"><span id="blog-info"><a href="/" title="Seelew's Blog"><span class="site-name">Seelew's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Computer Networking:A Top-Down Approach 8th Edition</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-21T06:15:09.000Z" title="发表于 2023-11-21 14:15:09">2023-11-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-21T06:15:09.000Z" title="更新于 2023-11-21 14:15:09">2023-11-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/blog/">blog</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>21分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Computer Networking:A Top-Down Approach 8th Edition"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-Computer-Networks-and-the-Internet"><a href="#1-Computer-Networks-and-the-Internet" class="headerlink" title="1 Computer Networks and the Internet"></a>1 Computer Networks and the Internet</h1><h2 id="1-1-What-Is-the-Internet"><a href="#1-1-What-Is-the-Internet" class="headerlink" title="1.1 What Is the Internet?"></a>1.1 What Is the Internet?</h2><h3 id="1-1-1-A-Nuts-and-Bolts-Description"><a href="#1-1-1-A-Nuts-and-Bolts-Description" class="headerlink" title="1.1.1 A Nuts-and-Bolts Description"></a>1.1.1 A Nuts-and-Bolts Description</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231121230342695.png" alt="1"></p>
<p>互联网是一个计算机网络，将传统计算设备如台式电脑、Linux工作站和所谓的服务器互联起来。如今非传统互联网“物”也在连接到互联网。所有这些设备被称为主机(hosts)或终端系统(end systems)。</p>
<p>终端系统通过通信链路(communication links)和分组交换机(packet switches)网络连接在一起。</p>
<p>常见的分组交换机有路由器(routers)和链路层交换机(link-layer switches)。链路层交换机通常用于接入网络，而路由器通常用于网络核心。</p>
<p>数据包从发送端系统到接收端系统所经过的通信链路和分组交换机的序列称为网络路由(route)或路径(path)。</p>
<p>终端系统通过互联网服务提供商(<strong>I</strong>nternet <strong>S</strong>ervice <strong>P</strong>roviders)访问互联网。每个ISP本身就是一个由分组交换机和通信链路组成的网络。ISP向终端系统提供各种类型的网络接入。互联网就是要把终端系统相互连接起来，因此为终端系统提供接入的ISP也必须相互连接。因此，这些低层互联网服务提供商通过国内和国际上层互联网服务提供商实现互联，而这些上层互联网服务提供商则直接相互连接。上层ISP由高速路由器和高速光纤链路组成。每个ISP网络，无论是上层还是下层，都是独立管理的，运行IP协议，并符合特定的命名和地址约定。</p>
<p>终端系统、分组交换机和互联网的其他部分都运行着控制互联网内信息收发的协议。传输控制协议(<strong>T</strong>ransmission <strong>C</strong>ontrol <strong>P</strong>rotocol)和互联网协议(<strong>I</strong>nternet <strong>P</strong>rotocol)是互联网中最重要的两个协议。IP协议规定了路由器和终端系统之间收发数据包的格式。互联网的主要协议统称为<strong>TCP/IP</strong>。</p>
<p>The IEEE 802 LAN Standards Committee [IEEE 802 2020], for example, specifies the Ethernet and wireless WiFi standards.</p>
<h3 id="1-1-2-A-Services-Description"><a href="#1-1-2-A-Services-Description" class="headerlink" title="1.1.2 A Services Description"></a>1.1.2 A Services Description</h3><p><strong><em>互联网是为应用程序提供服务的基础设施。</em></strong></p>
<p>这些应用被称为分布式应用，因为它们涉及多个相互交换数据的终端系统。互联网应用是在终端系统上运行的，而不是在网络核心的分组交换机上运行的。虽然分组交换机有助于终端系统之间的数据交换，但它们与作为数据源或数据汇的应用程序无关。</p>
<p>连接到互联网的终端系统提供一个套接字接口(socket interface)，规定在一个终端系统上运行的程序如何要求互联网基础设施向在另一个终端系统上运行的特定目标程序传送数据。互联网套接字接口是一组规则，发送程序必须遵守这些规则，这样互联网才能将数据传送给目标程序。</p>
<blockquote>
<p>爱丽丝必须遵循这些规则才能让邮政服务将她的信投递给鲍勃。</p>
</blockquote>
<p>互联网为其应用程序提供多种服务。</p>
<h3 id="1-1-3-What-Is-a-Protocol"><a href="#1-1-3-What-Is-a-Protocol" class="headerlink" title="1.1.3 What Is a Protocol?"></a>1.1.3 What Is a Protocol?</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231121224818849.png" alt="2"></p>
<blockquote>
<p>如果人们执行不同的协议（例如，一个人有礼貌而另一个人没有，或者一个人理解时间概念而另一个人不理解），协议就无法互操作，也就无法完成有用的工作。</p>
</blockquote>
<p>联网也是如此——需要两个（或更多）运行相同协议的通信实体才能完成任务。</p>
<p>信息的发送和接收，以及在发送和接收这些信息时所采取的一系列常规操作，是这种问答协议的核心。</p>
<p>互联网中涉及两个或多个远程通信实体的所有活动都受协议制约。例如，在两台物理连接的计算机中，硬件实现的协议控制着两块网络接口卡之间 “线 “上的比特流；终端系统中的拥塞控制协议控制着数据包在发送方和接收方之间的传输速率；路由器中的协议决定着数据包从源到目的地的路径。</p>
<p>从上述人类和网络的例子来看，信息的交换以及收发这些信息时所采取的行动是协议的关键定义要素：</p>
<p><strong><em>协议定义了两个或多个通信实体之间交换信息的格式和顺序，以及在传输和/或接收信息或其他事件时所采取的行动。</em></strong></p>
<h2 id="1-2-The-Network-Edge"><a href="#1-2-The-Network-Edge" class="headerlink" title="1.2 The Network Edge"></a>1.2 The Network Edge</h2><p>在计算机网络术语中，连接到互联网的计算机和其他设备通常被称为终端系统。它们之所以被称为终端系统，是因为它们位于互联网的边缘。</p>
<ul>
<li>终端系统也被称为主机，因为它们承载（即运行）应用程序，如网络浏览器程序、网络服务器程序、电子邮件客户端程序或电子邮件服务器程序。主机有时会进一步分为两类：客户端(clients)和服务器(servers)。非正式地讲，客户端往往是台式机、笔记本电脑、智能手机等，而服务器往往是存储和分发网页、视频流、转发电子邮件等功能更强大的机器。如今，我们接收搜索结果、电子邮件、网页、视频和移动应用程序内容的服务器大多位于大型数据中心(data centers)。</li>
</ul>
<h3 id="1-2-1-Access-Networks"><a href="#1-2-1-Access-Networks" class="headerlink" title="1.2.1 Access Networks"></a>1.2.1 Access Networks</h3><p>接入网络——将终端系统与第一个路由器（也称为 “边缘路由器”）物理连接起来的网络。</p>
<h4 id="Home-Access-DSL-Cable-FTTH-and-5G-Fixed-Wireless"><a href="#Home-Access-DSL-Cable-FTTH-and-5G-Fixed-Wireless" class="headerlink" title="Home Access: DSL, Cable, FTTH, and 5G Fixed Wireless"></a>Home Access: DSL, Cable, FTTH, and 5G Fixed Wireless</h4><p>目前，最普遍的两种宽带住宅接入方式是数字用户线路(<strong>D</strong>igital <strong>S</strong>ubscriber <strong>L</strong>ine)和电缆(cable)。住宅通常从提供有线本地电话接入的本地电话公司(telco)获得DSL互联网接入。因此，使用DSL时，用户的电话公司也是其ISP。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231121234559850.png" alt="3"></p>
<ul>
<li>每个用户的DSL调制解调器(“猫”，modem)使用现有的电话线与位于电信公司本地中心局 (CO) 的数字用户线路接入多路复用器 (<strong>DSLA</strong>ccess <strong>M</strong>ultiplexer) 交换数据。</li>
</ul>
<ul>
<li><p>住宅电话线可同时传输数据和传统电话信号，这两种信号的编码频率不同：</p>
<ul>
<li>A high-speed downstream channel, in the 50 kHz to 1 MHz band </li>
</ul>
</li>
</ul>
<ul>
<li>A medium-speed upstream channel, in the 4 kHz to 50 kHz band </li>
</ul>
<ul>
<li>An ordinary two-way telephone channel, in the 0 to 4 kHz band</li>
</ul>
<ul>
<li>这种方法使单个DSL链路看起来好像有三个独立的链路，因此电话和互联网连接可以同时共享DSL链路。（频分复用技术）</li>
</ul>
<ul>
<li>在用户端，分路器(splitter)将到达家庭的数据信号和电话信号分开，并将数据信号转发给DSL调制解调器；在电信公司方面，在本地中心局，DSLAM分离数据和电话信号，并将数据发送到互联网。数百甚至数千个家庭连接到一个DSLAM。</li>
</ul>
<ul>
<li>DSL标准规定了多种传输速率，最新标准规定了1Gbps的上行加下行总速率[ITU 2014]。由于下行和上行速率不同，这种接入方式被称为非对称接入。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231122215452014.png" alt="image-20231122215452014"></p>
<p>DSL利用电信公司现有的本地电话基础设施，而有线互联网接入(cable Internet access)则利用有线电视公司现有的有线电视基础设施。住宅从提供有线电视的同一家公司获得有线互联网接入。光纤连接电缆头端(cable head end)与社区级联结点，然后使用传统的同轴电缆将电缆连接到各个住宅和公寓。由于该系统同时使用光纤和同轴电缆，因此通常被称为混合光纤同轴(<strong>H</strong>ybrid <strong>F</strong>iber <strong>C</strong>oax)网络。</p>
<ul>
<li>电缆上网需要特殊的调制解调器，称为电缆调制解调器(cable modems)。与DSL调制解调器一样，电缆调制解调器通常是一个外部设备，通过以太网端口与家用电脑连接。在电缆头端，电缆调制解调器终端系统(<strong>C</strong>able <strong>M</strong>odem <strong>T</strong>ermination <strong>S</strong>ystem)的功能与DSL网络的DSLAM相似，它将从许多下游家庭的电缆调制解调器发送的模拟信号转换成数字格式。电缆调制解调器将HFC网络分为两个通道，一个下行通道和一个上行通道。与DSL一样，接入通常是不对称的，下行信道的传输速率通常高于上行信道。</li>
</ul>
<ul>
<li>有线互联网接入的一个重要特点是它是一种共享的广播媒介。特别是，头端发送的每个数据包都会通过每条链路下传到每个家庭，而家庭发送的每个数据包都会通过上游信道上传到头端。因此，如果多个用户同时在下行信道上下载视频文件，则每个用户接收视频文件的实际速率将大大低于有线电视的总下行速率。由于上行信道也是共享的，因此需要一个分布式多路访问协议来协调传输和避免碰撞。</li>
</ul>
<p>光纤到户(<strong>F</strong>iber <strong>T</strong>o <strong>T</strong>he <strong>H</strong>ome)[Fiber Broadband 2020]是一种新兴技术，可提供更高的速度。FTTH的概念很简单——提供一条从CO直接到家庭的光纤路径。从CO到住户的光纤分配有几种相互竞争的技术。最简单的光纤分配网络称为直接光纤，每户家庭都有一根光纤从CO出发。更常见的情况是，离开CO的每根光纤实际上都被许多住户共享；直到光纤相对接近住户时，才会被拆分成客户专用的单根光纤。目前有两种相互竞争的光分配网络体系结构可以实现这种分割：有源光网络(<strong>A</strong>ctive <strong>O</strong>ptical <strong>N</strong>etwork<strong>s</strong>)和无源光网络(<strong>P</strong>assive <strong>O</strong>ptical <strong>N</strong>etwork<strong>s</strong>)。AON本质上是交换式以太网。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231122222111634.png" alt="image-20231122222111634"></p>
<ul>
<li>如图是PON分配结构的FTTH。每个家庭都有一个光网络终端(<strong>O</strong>ptical <strong>N</strong>etwork <strong>T</strong>erminator)，它通过专用光纤与小区分路器相连。分路器将多个家庭（通常少于 100 户）合并到一根共享光纤上，然后连接到电信公司CO的光线路终端器(<strong>O</strong>ptical <strong>L</strong>ine <strong>T</strong>erminator)。OLT提供光信号和电信号之间的转换，并通过电信公司的路由器连接到互联网。在家里，用户将家用路由器（通常是无线路由器）连接到ONT，并通过该家用路由器访问互联网。在PON架构中，从OLT发送到分路器的所有数据包都在分路器上进行复制（类似于电缆头端）。</li>
</ul>
<p>除了 DSL、Cable 和FTTH，5G 固定无线网络也开始部署。5G固定无线网络不仅能提供高速的住宅接入，而且无需从电信公司的CO到住宅安装昂贵且易发生故障的电缆。5G固定无线技术采用波束成形技术，数据从供应商的基站以无线方式发送到家中的调制解调器。WiFi无线路由器与调制解调器相连（可能捆绑在一起），类似于WiFi无线路由器与电缆或DSL调制解调器的连接方式。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231124153448136.png" alt="image-20231124153448136"></p>
<p>局域网(<strong>L</strong>ocal <strong>A</strong>rea <strong>N</strong>etwork)技术有多种类型，最普遍的接入技术是以太网(Ethernet)。</p>
<ul>
<li><p>以太网用户使用双绞线铜线(twisted-pair copper wire)连接到以太网交换机。然后，以太网交换机或由此类互连交换机组成的网络又与更大的互联网相连。</p>
</li>
<li><p>基于IEEE 802.11技术的无线局域网接入(WiFi)无处不在。在无线局域网环境中，无线用户向接入点发送/接收数据包，接入点连接到企业网络（很可能使用有线以太网），而企业网络又连接到有线互联网。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231124153651865.png" alt="image-20231124153651865"></p>
<h4 id="Wide-Area-Wireless-Access-3G-and-LTE-4G-and-5G"><a href="#Wide-Area-Wireless-Access-3G-and-LTE-4G-and-5G" class="headerlink" title="Wide-Area Wireless Access: 3G and LTE 4G and 5G"></a>Wide-Area Wireless Access: 3G and LTE 4G and 5G</h4><ul>
<li>设备采用与蜂窝电话相同的无线基础设施，通过蜂窝网络提供商运营的基站发送/接收数据包。与 WiFi 不同的是，用户只需在距离基站几十公里（而不是几十米）的范围内即可使用。其实际下载速度可达 60 Mbps。更高速的广域接入技术——第五代（5G）广域无线网络已经开始部署。</li>
<li>广域蜂窝接入网(Wide-area cellular access networks)<ul>
<li>provided by mobile, cellular network operator (10’s km)</li>
<li>10’s Mbps </li>
</ul>
</li>
</ul>
<h3 id="1-2-2-Physical-Media"><a href="#1-2-2-Physical-Media" class="headerlink" title="1.2.2 Physical Media"></a>1.2.2 Physical Media</h3><p>物理介质分为两类：导向介质(guided media)和非导向介质(unguided media)。</p>
<ul>
<li>在导向介质中，电波沿着固体介质（如光导纤维、双绞线或同轴电缆）传播。</li>
<li>对于非导向介质，电波在大气层和外层空间传播，例如在无线局域网(WLAN)或数字卫星信道中传播。</li>
</ul>
<h4 id="Twisted-Pair-Copper-Wire"><a href="#Twisted-Pair-Copper-Wire" class="headerlink" title="Twisted-Pair Copper Wire"></a>Twisted-Pair Copper Wire</h4><ul>
<li>双绞线铜线是成本最低、最常用的引导传输介质。</li>
<li>电话网络一直使用双绞线。</li>
<li>非屏蔽双绞线(<strong>U</strong>nshielded <strong>T</strong>wisted <strong>P</strong>air)通常用于建筑物内的计算机网络，即局域网。目前，使用双绞线的局域网数据传输速率从 10 Mbps 到 10 Gbps 不等。双绞线成为高速局域网联网的主流解决方案。</li>
<li>双绞线也常用于住宅互联网接入。拨号调制解调器技术可通过双绞线实现高达 56 kbps 的接入速率。DSL技术使住宅用户能够通过双绞线以10’s Mbps 的速率访问互联网（当用户居住地靠近 ISP 的CO时）。</li>
</ul>
<h4 id="Coaxial-Cable"><a href="#Coaxial-Cable" class="headerlink" title="Coaxial Cable"></a>Coaxial Cable</h4><ul>
<li>与双绞线一样，同轴电缆由两根铜导体组成，但两根导体同心而非平行。有了这种结构以及特殊的绝缘和屏蔽，同轴电缆可以实现很高的数据传输速率。</li>
<li>同轴电缆在有线电视系统中非常常见。有线电视系统最近与cable modem相结合，为住宅用户提供了100’s Mbps 的互联网接入速率。在有线电视和有线互联网接入中，发射机将数字信号转移到特定频段，然后将产生的模拟信号从发射机发送到一个或多个接收器。</li>
<li>同轴电缆可用作导向共享介质(guided shared medium)。具体来说，一些终端系统可以直接连接到电缆上，每个终端系统都可以接收其他终端系统发送的任何信号。</li>
</ul>
<h4 id="Fiber-Optics"><a href="#Fiber-Optics" class="headerlink" title="Fiber Optics"></a>Fiber Optics</h4><ul>
<li>光纤是一种薄而灵活的介质，可传输光脉冲，每个脉冲代表一个比特。单根光纤可支持极大的比特率，10’s ~ 100’s Mbps。</li>
<li>不受电磁干扰，信号衰减极低，最远可达 100 公里，而且很难被窃听。这些特点使光纤成为首选的长途导向传输媒体，尤其是海外链路。美国和其他地方的许多长途电话网络现在都完全使用光纤。光纤在互联网骨干网(backbone)中也很普遍。</li>
<li>光设备（如发射器、接收器和交换机）的高成本阻碍了它们在局域网或家庭接入网等短途传输中的应用。</li>
<li>光载波(<strong>O</strong>ptical <strong>C</strong>arrier)标准链路速度从 51.8 Mbps 到 39.8 Gbps 不等；这些规格通常称为 OC-n，其中链路速度等于 n × 51.8 Mbps。目前使用的标准包括 OC-1、OC-3、OC-12、OC-24、OC-48、OC-96、OC-192 和 OC-768。</li>
</ul>
<h4 id="Terrestrial-Radio-Channels"><a href="#Terrestrial-Radio-Channels" class="headerlink" title="Terrestrial Radio Channels"></a>Terrestrial Radio Channels</h4><ul>
<li>无线电信道在电磁频谱中传输信号。</li>
<li>无线电信道的特性在很大程度上取决于传播环境和信号传输距离。环境因素决定了路径损耗和阴影衰落（当信号传输距离较远并绕过/穿过障碍物时，信号强度会降低）、多径衰落（由于信号被干扰物体反射）和干扰（由于其他传输和电磁信号）。</li>
<li>地面无线电信道大致可分为三类：极短距离无线电信道、局域无线电信道和广域无线电信道。无线耳机、键盘等使用极端距离无线电信道；WLAN技术使用的是局域无线电信道；蜂窝接入(cellular access)技术使用的是广域无线电信道。</li>
</ul>
<h4 id="Satellite-Radio-Channels"><a href="#Satellite-Radio-Channels" class="headerlink" title="Satellite Radio Channels"></a>Satellite Radio Channels</h4><ul>
<li>通信卫星将两个或多个地面微波发射器/接收器（称为地面站）连接起来。卫星接收一个频段的传输信号，使用中继器（下文将讨论）再生信号，然后在另一个频段上传输信号。</li>
<li>用于通信的卫星有两类：地球静止卫星(geostationary satellites)和低地轨道卫星(<strong>L</strong>ow-<strong>E</strong>arth <strong>O</strong>rbiting)。</li>
<li>280ms 信号传播延迟，链路运行速度100’s Mbps，通常用于无法使用 DSL 或电缆上网的地区。</li>
<li>LEO可以用于互联网接入。</li>
</ul>
<h2 id="1-3-The-Network-Core"><a href="#1-3-The-Network-Core" class="headerlink" title="1.3 The Network Core"></a>1.3 The Network Core</h2><p>连接互联网终端系统的分组交换机和链路网。</p>
<h3 id="1-3-1-Packet-Switching"><a href="#1-3-1-Packet-Switching" class="headerlink" title="1.3.1 Packet Switching"></a>1.3.1 Packet Switching</h3><ul>
<li>要将信息从信源端系统发送到目的端系统，信源会将长信息分成较小的数据块，即数据包。</li>
<li>在源端和目的端之间，每个数据包都要经过通信链路和分组交换机（主要有两种类型：路由器和链路层交换机）。数据包在每个通信链路上的传输速率等于链路的全部传输速率。</li>
</ul>
<h4 id="Store-and-Forward-Transmission"><a href="#Store-and-Forward-Transmission" class="headerlink" title="Store-and-Forward Transmission"></a>Store-and-Forward Transmission</h4><p>大多数分组交换机在链路输入端使用存储转发传输。</p>
<ul>
<li>存储转发传输意味着分组交换机必须先接收到整个数据包，然后才能开始将数据包的第一比特传输到出站链路上。</li>
<li>路由器通常会有许多入站链路，因为它的任务是将传入数据包切换到出站链路上。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231124175912639.png" alt="image-20231124175912639"></p>
<ul>
<li><p>这个例子中，源端有三个数据包要发送到目的地，每个数据包由$L$bits组成。在图 1.11 所示的时间快照处，信源已传送了部分数据包 1，而数据包 1 的前端已到达路由器。由于路由器采用了存储转发技术，因此在这一时刻，路由器不能传输它已收到的比特，而必须先缓冲（即 “store”）数据包的比特。只有在路由器接收到数据包的所有比特后，它才能开始将数据包传输（即 “forward”）到出站链路上。</p>
</li>
<li><p>忽略传播延迟。信源在时间 $0$ 开始传输；在时间 $L/R$ 秒时，信源已传输完整个数据包，路由器也已接收并存储了整个数据包。在 $L/R$ 秒时，由于路由器刚刚接收到整个数据包，因此可以开始将数据包传输到目的地的出站链路上；在 $2L/R$ 秒时，路由器已传输完整个数据包，目的地也已接收到整个数据包。总延迟为 $2L/R$。</p>
</li>
<li><p>考虑一般情况。通过由 $N$ 个链路组成的路径从源点向目的地发送一个数据包（在源点和目的地之间有 $N-1$ 个路由器）。端到端延迟为</p>
<script type="math/tex; mode=display">
d_{end-to-end} = N \frac{L}{R}</script></li>
</ul>
<h4 id="Queuing-Delays-and-Packet-Loss"><a href="#Queuing-Delays-and-Packet-Loss" class="headerlink" title="Queuing Delays and Packet Loss"></a>Queuing Delays and Packet Loss</h4><ul>
<li>每个分组交换机都有多个连接链路。对于每个连接的链路，分组交换机都有一个输出缓冲区(output buffer)，也称为输出队列(output queue)，用于存储路由器即将发送到该链路的数据包。</li>
<li>除了存储转发延迟外，数据包还会受到输出缓冲区排队延迟的影响。这些延迟是可变的，取决于网络的拥塞程度。</li>
<li>由于缓冲区空间有限，到达的数据包可能会发现缓冲区已被其他等待传输的数据包占满。在这种情况下，数据包丢失(packet loss)就会发生——到达的数据包或已经排队的数据包都会被丢弃。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231124193525475.png" alt="image-20231124193525475"></p>
<h4 id="Forwarding-Tables-and-Routing-Protocols"><a href="#Forwarding-Tables-and-Routing-Protocols" class="headerlink" title="Forwarding Tables and Routing Protocols"></a>Forwarding Tables and Routing Protocols</h4><ul>
<li>在互联网中，每个终端系统都有一个地址，称为 IP 地址。当源端系统要向目的端系统发送数据包时，源端系统会在数据包头中包含目的端的 IP 地址。</li>
</ul>
<blockquote>
<p>与邮政地址一样，该地址也具有层次结构。</p>
</blockquote>
<ul>
<li>当数据包到达网络中的路由器时，路由器会检查数据包目的地址的一部分，并将数据包转发给相邻的路由器。更具体地说，每个路由器都有一个转发表(forwarding table)，将目的地址（或目的地址的一部分）映射到该路由器的出站链接上。当数据包到达路由器时，路由器会检查地址并使用该目标地址搜索转发表，以找到合适的出站链接。然后，路由器将数据包引导到该出站链接。</li>
</ul>
<blockquote>
<p>端到端路由选择过程类似于一个不使用地图而喜欢问路的汽车司机。例如，假设乔驾车从费城前往佛罗里达州奥兰多市的湖滨大道 156 号。乔首先开车到附近的加油站，询问如何前往佛罗里达州奥兰多市的湖滨大道 156 号。加油站服务员提取了地址中的佛罗里达州部分，告诉乔需要上 I-95 South 州际公路，入口就在加油站旁边。他还告诉乔，一旦进入佛罗里达州，他就应该询问那里的其他人。然后，乔沿着 I-95 南线一直走到佛罗里达州的杰克逊维尔，这时他向另一个加油站的服务员问路。服务员摘录了地址中的奥兰多部分，并告诉乔，他应该继续沿着 I-95 公路前往代托纳海滩，然后再去问别人。在代托纳海滩，另一名加油站服务员也提取了地址中的奥兰多部分，并告诉乔应该直接走 I-4 号公路前往奥兰多。乔乘坐 I-4 号公路，在奥兰多出口下了车。乔去找另一个加油站的服务员，这次服务员提取了地址中的湖滨大道部分，并告诉乔必须沿着哪条路才能到达湖滨大道。到达湖滨路后，乔向一个骑自行车的孩子询问如何到达目的地。孩子摘录了地址中的 156 部分，并指出了房子的位置。乔终于到达了最终目的地。在上述比喻中，加油站服务员和骑自行车的孩子就好比路由器。</p>
</blockquote>
<ul>
<li>路由器使用数据包的目的地址来索引转发表，并确定适当的出站链接。那么<strong><em>转发表是如何设置的？</em></strong>互联网有许多特殊的路由协议，用于自动设置转发表。例如，路由协议可以确定从每个路由器到每个目的地的最短路径，并使用最短路径结果来配置路由器中的转发表。（第 5 章）</li>
</ul>
<h3 id="1-3-2-Circuit-Switching"><a href="#1-3-2-Circuit-Switching" class="headerlink" title="1.3.2 Circuit Switching"></a>1.3.2 Circuit Switching</h3><p>通过链路和交换机网络传输数据有两种基本方法：电路交换和分组交换。</p>
<ul>
<li>在电路交换网络中，终端系统之间通信所需的路径资源（缓冲区、链路传输速率）是在终端系统之间的通信会话(session)期间预留(reserved)的。在分组交换网络中，这些资源并不保留；会话信息按需使用资源，因此可能需要等待（即排队）才能进入通信链路。</li>
<li>传统的电话网络就是电路交换网络的例子。在发送方发送信息之前，网络必须在发送方和接收方之间建立连接。这是一个真正的连接，发送方和接收方之间路径上的交换机为该连接保持连接状态。在电话术语中，这种连接称为电路(circuit)。</li>
<li>网络在建立电路时，也会在连接期间为网络链路预留一个恒定的传输速率（代表每个链路传输容量的一部分）。由于已为发送方到接收方的连接预留了一定的传输速率，因此发送方可以按照保证的恒定速率向接收方传输数据。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/loadingPostImg.gif" data-original="image-20231124200349949.png" alt="image-20231124200349949"></p>
<ul>
<li>图 1.13 展示了一个电路交换网络。在该网络中，四个电路交换机通过四个链路相互连接。每个链路都有四个电路，因此每个链路可同时支持四个连接。每台主机（如个人电脑和工作站）都直接连接到其中一台交换机。当两台主机要通信时，网络会在两台主机之间建立专用的端到端连接。因此，为了让主机 A 与主机 B 通信，网络必须首先在两条链路上各预留一条电路。在本例中，专用端到端连接使用了第一条链路中的第二个电路和第二条链路中的第四个电路。由于每个链路都有四个电路，因此端到端连接每使用一个链路，就能在连接期间获得该链路总传输容量的四分之一。因此，举例来说，如果相邻交换机之间的每个链路的传输速率都是 1 Mbps，那么每个端到端电路交换机连接就能获得 250 kbps 的专用传输速率。</li>
<li>相比之下，如果一台主机想通过分组交换网络（如互联网）向另一台主机发送数据包，与电路交换不同的是，数据包是在不预留任何链路资源的情况下发送到网络中的。如果其中一条链路因其他数据包需要同时通过该链路传输而拥塞，那么数据包将不得不在传输链路发送端的缓冲区中等待，并遭受延迟。互联网会尽最大努力及时传送数据包，但不作任何保证。</li>
</ul>
<h4 id="Multiplexing-in-Circuit-Switched-Networks"><a href="#Multiplexing-in-Circuit-Switched-Networks" class="headerlink" title="Multiplexing in Circuit-Switched Networks"></a>Multiplexing in Circuit-Switched Networks</h4><h4 id="Packet-Switching-Versus-Circuit-Switching"><a href="#Packet-Switching-Versus-Circuit-Switching" class="headerlink" title="Packet Switching Versus Circuit Switching"></a>Packet Switching Versus Circuit Switching</h4><h3 id="1-3-3-A-Network-of-Networks"><a href="#1-3-3-A-Network-of-Networks" class="headerlink" title="1.3.3 A Network of Networks"></a>1.3.3 A Network of Networks</h3><h2 id="1-4-Delay-Loss-and-Throughput-in-Packet-Switched-Networks"><a href="#1-4-Delay-Loss-and-Throughput-in-Packet-Switched-Networks" class="headerlink" title="1.4 Delay, Loss, and Throughput in Packet-Switched Networks"></a>1.4 Delay, Loss, and Throughput in Packet-Switched Networks</h2><h3 id="1-4-1-Overview-of-Delay-in-Packet-Switched-Networks"><a href="#1-4-1-Overview-of-Delay-in-Packet-Switched-Networks" class="headerlink" title="1.4.1 Overview of Delay in Packet-Switched Networks"></a>1.4.1 Overview of Delay in Packet-Switched Networks</h3><h4 id="Types-of-Delay"><a href="#Types-of-Delay" class="headerlink" title="Types of Delay"></a>Types of Delay</h4><h4 id="Processing-Delay"><a href="#Processing-Delay" class="headerlink" title="Processing Delay"></a>Processing Delay</h4><h4 id="Queuing-Delay"><a href="#Queuing-Delay" class="headerlink" title="Queuing Delay"></a>Queuing Delay</h4><h4 id="Transmission-Delay"><a href="#Transmission-Delay" class="headerlink" title="Transmission Delay"></a>Transmission Delay</h4><h4 id="Propagation-Delay"><a href="#Propagation-Delay" class="headerlink" title="Propagation Delay"></a>Propagation Delay</h4><h4 id="Comparing-Transmission-and-Propagation-Delay"><a href="#Comparing-Transmission-and-Propagation-Delay" class="headerlink" title="Comparing Transmission and Propagation Delay"></a>Comparing Transmission and Propagation Delay</h4><h3 id="1-4-2-Queuing-Delay-and-Packet-Loss"><a href="#1-4-2-Queuing-Delay-and-Packet-Loss" class="headerlink" title="1.4.2 Queuing Delay and Packet Loss"></a>1.4.2 Queuing Delay and Packet Loss</h3><h4 id="Packet-Loss"><a href="#Packet-Loss" class="headerlink" title="Packet Loss"></a>Packet Loss</h4><h3 id="1-4-3-End-to-End-Delay"><a href="#1-4-3-End-to-End-Delay" class="headerlink" title="1.4.3 End-to-End Delay"></a>1.4.3 End-to-End Delay</h3><h4 id="Traceroute"><a href="#Traceroute" class="headerlink" title="Traceroute"></a>Traceroute</h4><h4 id="End-System-Application-and-Other-Delays"><a href="#End-System-Application-and-Other-Delays" class="headerlink" title="End System, Application, and Other Delays"></a>End System, Application, and Other Delays</h4><h3 id="1-4-4-Throughput-in-Computer-Networks"><a href="#1-4-4-Throughput-in-Computer-Networks" class="headerlink" title="1.4.4 Throughput in Computer Networks"></a>1.4.4 Throughput in Computer Networks</h3><h2 id="1-5-Protocol-Layers-and-Their-Service-Models"><a href="#1-5-Protocol-Layers-and-Their-Service-Models" class="headerlink" title="1.5 Protocol Layers and Their Service Models"></a>1.5 Protocol Layers and Their Service Models</h2><h3 id="1-5-1-Layered-Architecture"><a href="#1-5-1-Layered-Architecture" class="headerlink" title="1.5.1 Layered Architecture"></a>1.5.1 Layered Architecture</h3><h4 id="Protocol-Layering"><a href="#Protocol-Layering" class="headerlink" title="Protocol Layering"></a>Protocol Layering</h4><h4 id="Application-Layer"><a href="#Application-Layer" class="headerlink" title="Application Layer"></a>Application Layer</h4><h4 id="Transport-Layer"><a href="#Transport-Layer" class="headerlink" title="Transport Layer"></a>Transport Layer</h4><h4 id="Network-Layer"><a href="#Network-Layer" class="headerlink" title="Network Layer"></a>Network Layer</h4><h4 id="Link-Layer"><a href="#Link-Layer" class="headerlink" title="Link Layer"></a>Link Layer</h4><h4 id="Physical-Layer"><a href="#Physical-Layer" class="headerlink" title="Physical Layer"></a>Physical Layer</h4><h3 id="1-5-2-Encapsulation"><a href="#1-5-2-Encapsulation" class="headerlink" title="1.5.2 Encapsulation"></a>1.5.2 Encapsulation</h3><h2 id="1-6-Networks-Under-Attack"><a href="#1-6-Networks-Under-Attack" class="headerlink" title="1.6 Networks Under Attack"></a>1.6 Networks Under Attack</h2><h4 id="The-Bad-Guys-Can-Put-Malware-into-Your-Host-Via-the-Internet"><a href="#The-Bad-Guys-Can-Put-Malware-into-Your-Host-Via-the-Internet" class="headerlink" title="The Bad Guys Can Put Malware into Your Host Via the Internet"></a>The Bad Guys Can Put Malware into Your Host Via the Internet</h4><h4 id="The-Bad-Guys-Can-Attack-Servers-and-Network-Infrastructure"><a href="#The-Bad-Guys-Can-Attack-Servers-and-Network-Infrastructure" class="headerlink" title="The Bad Guys Can Attack Servers and Network Infrastructure"></a>The Bad Guys Can Attack Servers and Network Infrastructure</h4><h4 id="The-Bad-Guys-Can-Sniff-Packets"><a href="#The-Bad-Guys-Can-Sniff-Packets" class="headerlink" title="The Bad Guys Can Sniff Packets"></a>The Bad Guys Can Sniff Packets</h4><h4 id="The-Bad-Guys-Can-Masquerade-as-Someone-You-Trust"><a href="#The-Bad-Guys-Can-Masquerade-as-Someone-You-Trust" class="headerlink" title="The Bad Guys Can Masquerade as Someone You Trust"></a>The Bad Guys Can Masquerade as Someone You Trust</h4></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/%E6%A0%87%E7%AD%BE/Notes/">Notes</a></div><div class="post_share"><div class="social-share" data-image="/default_cover%20(29).png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/26/JZ/" title="Matrix theory"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/default_cover%20(43).png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Matrix theory</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/12/ML2/" title="ML作业2"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/default_cover%20(41).png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">ML作业2</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/06/27/JSolution/" title="Leetcode_JavaSolution"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/default_cover%20(60).png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-27</div><div class="title">Leetcode_JavaSolution</div></div></a></div><div><a href="/2023/11/26/JZ/" title="Matrix theory"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/default_cover%20(43).png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-11-26</div><div class="title">Matrix theory</div></div></a></div><div><a href="/2025/03/10/JavaNotes/" title="JavaNotes"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/default_cover%20(61).png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-10</div><div class="title">JavaNotes</div></div></a></div><div><a href="/2025/03/25/Q/" title="Q"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/default_cover%20(62).png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-25</div><div class="title">Q</div></div></a></div><div><a href="/2024/06/05/bl/" title="Blockchain Consensus Algorithms"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/default_cover%20(49).png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-05</div><div class="title">Blockchain Consensus Algorithms</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Computer-Networks-and-the-Internet"><span class="toc-text">1 Computer Networks and the Internet</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-What-Is-the-Internet"><span class="toc-text">1.1 What Is the Internet?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-A-Nuts-and-Bolts-Description"><span class="toc-text">1.1.1 A Nuts-and-Bolts Description</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-A-Services-Description"><span class="toc-text">1.1.2 A Services Description</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-What-Is-a-Protocol"><span class="toc-text">1.1.3 What Is a Protocol?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-The-Network-Edge"><span class="toc-text">1.2 The Network Edge</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-Access-Networks"><span class="toc-text">1.2.1 Access Networks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Home-Access-DSL-Cable-FTTH-and-5G-Fixed-Wireless"><span class="toc-text">Home Access: DSL, Cable, FTTH, and 5G Fixed Wireless</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Wide-Area-Wireless-Access-3G-and-LTE-4G-and-5G"><span class="toc-text">Wide-Area Wireless Access: 3G and LTE 4G and 5G</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-Physical-Media"><span class="toc-text">1.2.2 Physical Media</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Twisted-Pair-Copper-Wire"><span class="toc-text">Twisted-Pair Copper Wire</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Coaxial-Cable"><span class="toc-text">Coaxial Cable</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fiber-Optics"><span class="toc-text">Fiber Optics</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Terrestrial-Radio-Channels"><span class="toc-text">Terrestrial Radio Channels</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Satellite-Radio-Channels"><span class="toc-text">Satellite Radio Channels</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-The-Network-Core"><span class="toc-text">1.3 The Network Core</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-Packet-Switching"><span class="toc-text">1.3.1 Packet Switching</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Store-and-Forward-Transmission"><span class="toc-text">Store-and-Forward Transmission</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Queuing-Delays-and-Packet-Loss"><span class="toc-text">Queuing Delays and Packet Loss</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Forwarding-Tables-and-Routing-Protocols"><span class="toc-text">Forwarding Tables and Routing Protocols</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-Circuit-Switching"><span class="toc-text">1.3.2 Circuit Switching</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Multiplexing-in-Circuit-Switched-Networks"><span class="toc-text">Multiplexing in Circuit-Switched Networks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Packet-Switching-Versus-Circuit-Switching"><span class="toc-text">Packet Switching Versus Circuit Switching</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-A-Network-of-Networks"><span class="toc-text">1.3.3 A Network of Networks</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-Delay-Loss-and-Throughput-in-Packet-Switched-Networks"><span class="toc-text">1.4 Delay, Loss, and Throughput in Packet-Switched Networks</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-1-Overview-of-Delay-in-Packet-Switched-Networks"><span class="toc-text">1.4.1 Overview of Delay in Packet-Switched Networks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Types-of-Delay"><span class="toc-text">Types of Delay</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Processing-Delay"><span class="toc-text">Processing Delay</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Queuing-Delay"><span class="toc-text">Queuing Delay</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Transmission-Delay"><span class="toc-text">Transmission Delay</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Propagation-Delay"><span class="toc-text">Propagation Delay</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Comparing-Transmission-and-Propagation-Delay"><span class="toc-text">Comparing Transmission and Propagation Delay</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-2-Queuing-Delay-and-Packet-Loss"><span class="toc-text">1.4.2 Queuing Delay and Packet Loss</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Packet-Loss"><span class="toc-text">Packet Loss</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-3-End-to-End-Delay"><span class="toc-text">1.4.3 End-to-End Delay</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Traceroute"><span class="toc-text">Traceroute</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#End-System-Application-and-Other-Delays"><span class="toc-text">End System, Application, and Other Delays</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-4-Throughput-in-Computer-Networks"><span class="toc-text">1.4.4 Throughput in Computer Networks</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-Protocol-Layers-and-Their-Service-Models"><span class="toc-text">1.5 Protocol Layers and Their Service Models</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-1-Layered-Architecture"><span class="toc-text">1.5.1 Layered Architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Protocol-Layering"><span class="toc-text">Protocol Layering</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Application-Layer"><span class="toc-text">Application Layer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Transport-Layer"><span class="toc-text">Transport Layer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Network-Layer"><span class="toc-text">Network Layer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Link-Layer"><span class="toc-text">Link Layer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Physical-Layer"><span class="toc-text">Physical Layer</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-2-Encapsulation"><span class="toc-text">1.5.2 Encapsulation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-Networks-Under-Attack"><span class="toc-text">1.6 Networks Under Attack</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#The-Bad-Guys-Can-Put-Malware-into-Your-Host-Via-the-Internet"><span class="toc-text">The Bad Guys Can Put Malware into Your Host Via the Internet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#The-Bad-Guys-Can-Attack-Servers-and-Network-Infrastructure"><span class="toc-text">The Bad Guys Can Attack Servers and Network Infrastructure</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#The-Bad-Guys-Can-Sniff-Packets"><span class="toc-text">The Bad Guys Can Sniff Packets</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#The-Bad-Guys-Can-Masquerade-as-Someone-You-Trust"><span class="toc-text">The Bad Guys Can Masquerade as Someone You Trust</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('/default_cover%20(29).png')"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By Seelew</div><div class="footer_custom_text">I wish you to become your own sun, no need to rely on who's light.<p><a target="_blank" href="https://hexo.io/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&logo=hexo" title="博客框架为Hexo"></a>&nbsp;<a target="_blank" href="https://butterfly.js.org/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&logo=bitdefender" title="主题采用butterfly"></a>&nbsp;<a target="_blank" href="https://www.jsdelivr.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&logo=jsDelivr" title="本站使用JsDelivr为静态资源提供CDN加速"></a> &nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vervel-brightgreen?style=flat&logo=Vercel" title="本站采用双线部署，默认线路托管于Vercel"></a>&nbsp;<a target="_blank" href="https://vercel.com/ "><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&logo=Codio" title="本站采用双线部署，联通线路托管于Coding"></a>&nbsp;<a target="_blank" href="https://github.com/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&logo=GitHub" title="本站项目由Gtihub托管"></a>&nbsp;<a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&logo=Claris" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"></a></p></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script async src="/js/title.js"></script><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><canvas id="snow"></canvas><script async src="/js/snow.js"></script><script id="canvas_nest" defer="defer" color="255,255,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body></html>